<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>MIRA-ENC v1</title>

<link rel="stylesheet" href="style.css">
<script type="text/javascript" src="common.js"></script>

<script type="text/javascript">

function jsOnLoad(){
	jsInitMenu(1);
	jsGET('index.json', jsLoadDone);
}

function jsLoadDone(rspText){
	var json = JSON.parse(rspText);

	jsUdLbl("lblMgwId",json,"mgwId");
	jsUdLbl("lblVCode",json,"vCode");
	jsUdLbl("lblVersion",json,"version");
	jsUdLbl("lblTime",json,"time");

	jsUdTxt("txtLanIp",json,"lanIp");
	jsUdTxt("txtLanSubnet",json,"lanSubnet");
	jsUdTxt("txtLanGateway",json,"lanGateway");

	jsUdTxt("slMqttSecurity",json,"mqttSecurity");
	jsUdTxt("txtMqttServer",json,"mqttServer");
	jsUdTxt("txtMqttPort",json,"mqttPort");

	jsUdTxt("txtStreamingServer",json,"streamingServer");
	jsUdTxt("txtStreamingPort",json,"streamingPort");
	jsUdTxt("txtMountPoint",json,"mountPoint");
	jsUdTxt("slAudioSource",json,"audioSource");


	jsUdTxt("slSimMode",json,"simMode");
	jsUdTxt("slMobileMode",json,"mobileMode");
	jsUdTxt("txtMobileApn",json,"mobileApn");

	jsUdTxt("txtGenericCycle",json,"genericCycle");
	jsUdTxt("txtStatusCycle",json,"statusCycle");
	jsUdTxt("txtVolume",json,"volume");

	jsUdTxt("txtFmVolume",json,"fmVolume");
	jsUdTxt("slFmMode",json,"fmMode");
	jsUdTxt("txtFmRssiThr",json,"fmRssiThr");

	jsFmModeChanged(json["fmMode"]);

	if (json["postRet"]){
		alert("Success!");
	}
}

function jsFmModeChanged(val) {
	jsGetE("txtFmRssiThr")[0].disabled = (val == 0);
}

function jsReset(){
	document.forms[0].reset();
}

function jsSubmit(){
	document.forms[0].submit();
}
</script>

<style>

</style>
</head>

<body onload="jsOnLoad();">

<div id="header">
</div>

<div id="nav">
</div>

<div id="content">
	<form id="idForm" method="post">
		<table style="padding-left:30px">
			<tr class="bh">
				<td class="tdh" colspan="2">Basic information</td>
			</tr>
			<tr>
				<td class="small">MGW ID</td>
				<td><label id="lblMgwId">-</label></td>
			</tr>
			<tr>
				<td>Verify Code</td>
				<td><label id="lblVCode">-</label></td>
			</tr>
			<tr>
				<td>Firmware Version</td>
				<td><label id="lblVersion">-</label></td>
			</tr>
			<tr>
				<td>Local time</td>
				<td><label id="lblTime">-</label></td>
			</tr>

			<tr class="bh">
				<td class="tdh" colspan="2">LAN settings</td>
			</tr>
			<tr>
				<td>Local IP address</td>
				<td><input name="txtLanIp" value="192.168.1.199"></td>
			</tr>
			<tr>
				<td>Subnet</td>
				<td><input name="txtLanSubnet" value="255.255.255.0"></td>
			</tr>
			<tr>
				<td>Gateway</td>
				<td><input name="txtLanGateway" value="192.168.1.1"></td>
			</tr>

			<tr class="bh">
				<td class="tdh" colspan="2">Server Settings </td>
			</tr>
			<tr>
				<td>Security</td>
				<td>
					<select name="slMqttSecurity">
						<option value="0" selected>None</option>
						<option value="1">SSL/TLS</option>
					</select>
				</td>
			</tr>
			<tr>
				<td>Managerment Server address</td>
				<td><input name="txtMqttServer" value="truyenthanhthongminh.vn"></td>
			</tr>
			<tr>
				<td>Managerment Server Port</td>
				<td><input type="number" name="txtMqttPort" value="1883" min="0" max="65535"></td>
			</tr>
			<tr>
				<td>Streaming Server address</td>
				<td><input name="txtStreamingServer" value="sohoa.truyenthanhthongminh.vn"></td>
			</tr>
			<tr>
				<td>Mount Point</td>
				<td><input name="txtMountPoint" value="live"></td>
			</tr>			
			<tr>
				<td>Streaming Server Port</td>
				<td><input type="number" name="txtStreamingPort" value="80" min="0" max="65535"></td>
			</tr>
			<tr class="bh">
				<td class="tdh" colspan="2">Other settings</td>
			</tr>
			<tr>
				<td>SIM</td>
				<td>
					<select name="slSimMode">
						<option value="0" selected>nanoSIM</option>
						<option value="1">eSIM(Mobifone Profile)</option>
					</select>
				</td>
			</tr>
			<tr>
				<td>Mobile Data mode</td>
				<td>
					<select name="slMobileMode">
						<option value="0">AUTO</option>
						<option value="3" selected>3G</option>
						<option value="4">4G</option>
					</select>
				</td>
			</tr>
			<tr>
				<td>Mobile APN</td>
				<td>
					<input type="text" name="txtMobileApn" value="m-wap">
					<select onchange="jsGetE('txtMobileApn')[0].value = this.value">
						<option value="">--</option>
						<option value="m-wap">Mobifone</option>
						<option value="m3-world">Vinafone</option>
						<option value="v-internet">Viettel</option>
						<option value="internet">Vietnam Mobile</option>
					</select>
				</td>
			</tr>
			<tr>
				<td>Audio Source</td>
				<td>
					<select name="slAudioSource">
						<option value="0" selected>Line In</option>
						<option value="1">FM Receiver</option>
						<option value="2">Micro</option>
					</select>
				</td>
			</tr>
			<tr>
				<td>Auto update GENERIC cycle</td>
				<td><input type="number" name="txtGenericCycle" value="120" min="0" max="43200"> (seconds)</td>
			</tr>
			<tr>
				<td>Auto update STATUS cycle</td>
				<td><input type="number" name="txtStatusCycle" value="60" min="0" max="43200"> (seconds)</td>
			</tr>
			<tr>
				<td>Normal Volume (0 - 100%)</td>
				<td><input type="number" name="txtVolume" value="50" min="0" max="100"></td>
			</tr>
			<tr>
				<td>FM Volume (0 - 100%)</td>
				<td><input type="number" name="txtFmVolume" value="50" min="0" max="100"></td>
			</tr>
			<tr>
				<td>FM Auto Stop for weak signal</td>
				<td>
					<select name="slFmMode" onchange="jsFmModeChanged(this.value)">
						<option value="0" selected>Disable</option>
						<option value="1">Enable</option>
					</select>
				</td>
			</tr>
			<tr>
				<td>FM Auto RSSI Threshold (0 - 100dBuV)</td>
				<td><input type="number" name="txtFmRssiThr" value="15" min="0" max="100"></td>
			</tr>

			<tr class="bh"><td colspan="2" /></tr>
		</table>

		<p style="text-align:left">
			<input type="button" onclick="jsSubmit();" value="Update"/>&nbsp;
			<input type="button" onclick="jsReset();" value="Default"/>
		</p>

	</form>
</div>
</body>
</html>