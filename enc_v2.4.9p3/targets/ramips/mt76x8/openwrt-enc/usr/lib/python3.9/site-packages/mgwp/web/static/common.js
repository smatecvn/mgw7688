
function jsCreateREQ(){
	var xmlHttp=null;
	try{
		if(window.XMLHttpRequest){
			xmlHttp=new XMLHttpRequest();
		}else{
			xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");
		}
	} catch(e){
		alert("CreateREQ error:"+e);
	}
	return xmlHttp;
}

function jsGET(uri,cb){
	var xReq=jsCreateREQ();
	if(xReq!=null){
		xReq.onreadystatechange= function(){
			if (xReq.readyState==4&&xReq.status==200){
				cb(xReq.responseText);
			}
		};
		xReq.open("GET",uri,true);
		xReq.send(null);
	}
}

function jsPOST(url,cb){
	var xReq=jsCreateREQ();
	if(xReq!=null){
		xReq.onreadystatechange=function(){
			if(xReq.readyState==4&&xReq.status==200){
				cb(xReq);
			}
		};
		xReq.open("POST",url,true);
		xReq.send(null);
	}
}

function jsGetE(eName){
	return document.getElementsByName(eName);
}

function jsGetEId(id){
	return document.getElementById(id);
}

function jsUdTxt(eN,json,key){
	var val=json[key];
	var e=jsGetE(eN);
	if(val!=null&&e.length>0){
		e[0].value=val;
	}
}

function jsUdLbl(id,json,key){
	var val=json[key];
	if (val!=null){
		var lbl=document.getElementById(id);
		if(lbl!=null){
			lbl.innerHTML=val;
		}
	}
}

function jsAddOpt(e,optName,optVal){
  var opt=document.createElement("option");
  opt.text=optName;
  opt.value=optVal;
  e.add(opt);
}

function jsChk2Txt(eN,val){
	var frm=document.forms[0];
	var t=document.createElement('input');
	t.type="text";
	t.name="txt"+eN;
	t.value=jsGetEId("chk"+eN).checked?1:0;
	t.hidden=true;
	frm.appendChild(t);
}

function jsCreateTxt(eN,val){
	var frm=document.forms[0];
	var t=document.createElement('input');
	t.type="text";
	t.name="txt"+eN;
	t.value=val;
	t.hidden=true;
	frm.appendChild(t);
}

function jsInitMenu(idx){
	var e = jsGetEId("header");
	if(e!=null){
		e.innerHTML="MIRA Audio Encoder";
	}
	jsGetEId("nav").innerHTML=
	'<div id="menu">'+
		'<ul>'+
			'<li id="li1"><a href="index.htm">Connection</a></li>'+
			'<li id="li2"><a href="media.htm">Media</a></li>'+
			'<li id="li3"><a href="player.htm">Player</a></li>'+
            '<li id="li4"><a href="status.htm">Status</a></li>'+
            '<li id="li5"><a href="gsm.htm">3G/4G</a></li>'+
			'<li id="li6"><a href="admin.htm">Admin</a></li>'+
			'<li id="li7"><a href="about.htm">About</a></li>'+
		'</ul>'+
	'</div>';

	e=jsGetEId("li"+idx);
	e.classList.add("active");
	e.childNodes[0].classList.add("active");

	var ft=document.createElement("div");
	ft.innerHTML="<div style=\"padding:5px 10px 10px 0px;\">&copy<a href=\"https://www.mobifone.vn\">MOBIFONE 2021</a></div>";
	ft.id="footer";
	document.body.appendChild(ft);
}