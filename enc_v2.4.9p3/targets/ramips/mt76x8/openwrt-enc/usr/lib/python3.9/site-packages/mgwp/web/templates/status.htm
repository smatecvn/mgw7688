<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>MIRA-ENC v1</title>

<link rel="stylesheet" href="style.css">
<script type="text/javascript" src="common.js"></script>

<script type="text/javascript">
var f5Cycle=3;
var timer;

function jsOnLoad(){
	jsInitMenu(4);
	xmlHttp=jsCreateREQ();
	jsGET('status.json', jsLoadDone);
	timer=setInterval(jsTimer,f5Cycle*1000);
}

function jsTimer(){
	if(f5Cycle>0){
		uriGET=0;
		jsGET('status.json', jsLoadDone);
	}
}


function jsLoadDone(rspText){
	var json = JSON.parse(rspText);

	jsUdLbl("lblUptime",json,"uptime");
	jsUdLbl("lblSd",json,"sd");
	jsUdLbl("lblLog",json,"log");
	jsUdLbl("lblMobile",json,"mobile");
	jsUdLbl("lblServer",json,"server");
	jsUdLbl("lblLoaded",json,"loaded");
	jsUdLbl("lblFm",json,"fm");
	jsUdLbl("lblSpk",json,"spk");
}

function jsF5Change(){
	var c=jsGetEId("numF5Cycle").value;
	if(c!=f5Cycle){
		f5Cycle=c;
		clearInterval(timer);
		jsTimer();
		if(f5Cycle>0){
			timer=setInterval(jsTimer,f5Cycle*1000);
		}
	}
}

function jsReadRssi() {
	jsGetE("txtCmd")[0].value=1;
	document.forms[0].submit();
}
</script>
</head>
<body onload="jsOnLoad();">

<div id="header">
</div>

<div id="nav">
</div>

<div id="content">
	<form method="post" onsubmit="return false;">
		<table id="tbl1">
			<tr>
				<td style="width:10%; min-width:50px;">Uptime</td>
				<td><label id="lblUptime">-</label></td>
			</tr>
			<tr>
				<td>SD</td>
				<td><label id="lblSd">-</label></td>
			</tr>
			<tr>
				<td>LOG</td>
				<td><label id="lblLog">-</label></td>
			</tr>
			<tr>
				<td>Mobile Connection</td>
				<td><label id="lblMobile">-</label></td>
			</tr>
			<tr>
				<td>Server</td>
				<td><label id="lblServer">-</label></td>
			</tr>
			<tr>
				<td>RX detail</td>
				<td><label id="lblLoaded">-</label></td>
			</tr>
			<tr>
				<td>FM</td>
				<td><label id="lblFm">-</label></td>
			</tr>
			<tr>
				<td>SPK</td>
				<td><label id="lblSpk">-</label></td>
			</tr>
			<tr class="bh"><td colspan="2" /></tr>
		</table>


		<div style="text-align:left;margin-bottom:20px;">
			Auto refresh
			<input type="number" style="width:50px;text-align:center;" id="numF5Cycle" value="3" onchange="jsF5Change()" min="0" max="10" />
			<p style="text-align:left">
				<input type="text" name="txtCmd" value="0" hidden>
				<input type="button" onclick="jsReadRssi()" value="Read RSSI"/>&nbsp;
			</p>
		</div>
	</form>
</div>
</body>
</html>